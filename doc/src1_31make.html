<HTML WIDTH=70% XPOS=right>
<HEAD>
<TITLE>
Making (Building) XWorkplace
</TITLE>
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000AA" VLINK="#777777">
With V0.9.0, the make process has been completely redesigned to allow
for easier extension of XWorkplace and for the Netlabs CVS server.

<P><B>Notes:</B>

<UL><LI>You will need to set a number of
<A HREF="src1_32env.html">environment variables</A> before building will work.

<P><LI>Because <CODE>XFLDR.DLL</CODE> is locked while the WPS is running, you
should <CODE>SET RUNWORKPLACE=[bootdrv]:\OS2\CMD.EXE</CODE> in CONFIG.SYS.
This will cause an OS/2 window to come up instead of the WPS after bootup.
Type <CODE>pmshell</CODE> then to start the WPS.
<P>You can also choose to have the makefiles unlock executables which are in use
automatically. See <A HREF="src1_32env.html">"Environment variables"</A> for
details.

<P><LI>The main <CODE>makefile</CODE> includes <CODE>setup.in</CODE> for compiler
and linker setup. If you use environment variables, there's normally no need to
modify that file.

<P><LI>Make sure you have at least 60 MB of free space in your TEMP directory. This
is needed for precompiled headers. I strongly recommend using RAMFS.IFS for your
TEMP directory. This dramatically speeds up things if you have 128 MB RAM or more.

<P><LI>Put the .EXE and .CMD files from <CODE>TOOLS\</CODE> somewhere on your
PATH. These are used by the makefiles. Or add the tools
directory to your path.

</UL><P><B>Starting the build process.</B> Open an OS/2 command window. Change to the
main XWorkplace source directory (the parent of <CODE>src</CODE> and <CODE>include</CODE>).
Type <CODE>nmake</CODE> or <CODE>nmake really_all</CODE>.
Take a look at the main <CODE>makefile</CODE> for additional targets.

<P>To have all the environment set properly, you can modify <CODE>MAKE.CMD</CODE>
and call that one instead, which invokes <CODE>nmake</CODE> in turn.

<P><B>Rebuilding the whole thing.</B> To rebuild everything, you have three
options:

<UL><LI>Delete the entire <CODE>bin\</CODE> tree. This is not part of the CVS
repository at Netlabs and recreated dynamically for all files that have been
created.
Deleting it will cause all target object files to become outdated and thus be recompiled.

<P><LI>Use <CODE>nmake -a</CODE> on the main makefile. This will even re-invoke
the SOM compiler on all <CODE>.IDL</CODE> files.

<P><LI>Open and save (or <CODE>touch</CODE>) <CODE>include/setup.h</CODE> to make
it newer than the target files. This is
<CODE>#include</CODE>'d in all XWorkplace C files, and the makefiles' inference
rules will then enforce recompilation of <I>all</I> C files.
</UL>
</BODY>
</HTML>

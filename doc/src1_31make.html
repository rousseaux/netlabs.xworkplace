<HTML WIDTH=70% XPOS=right>
<HEAD>
<TITLE>
Making (Building) XWorkplace
</TITLE>
</HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000AA" VLINK="#777777">
With V0.9.0, the make process has been completely redesigned to allow
for easier extension of XWorkplace and for the Netlabs CVS server.

<P>If you wish to build the whole XWorkplace thing including the NLS DLLs
and the INF and HLP files, please follow the steps in README.TXT in the
main directory. I have added more information about
<A HREF="src1_32env.html">environment variables</A> to this file also.

<P>A complete build including NLS (<CODE>nmake -a really_all</CODE>)
currently (99-11-29) takes 4:19 minutes on my PII-400, 128 MB RAM.

</OL><B>Debug code.</B> Depending on whether the <CODE>XWPDEBUG</CODE> environment
variable is set (in <CODE>MAKE.CMD</CODE> or <CODE>SETUP.IN</CODE> or somewhere else),
XWorkplace will be compiled with debug code or not. See the
<A HREF="src1_32env.html">next page</A> for details.

<P><B>Makefiles.</B> Each directory now has its own makefile. All makefiles were
written for IBM NMAKE. I don't know if these will work with other make utilities.

<P><B>Replacing in-use files.</B> You can rebuild XWorkplace even while the WPS is up
and XWorkplace is installed. The makefiles will automatically unlock DLLs which
are currently in use. After the rebuild, restart the WPS to make it use the newly
built DLLs. To do this, simply set XWP_UNLOCK_MODULES=YES before running the main
makefile.

<P><B>Note:</B> This environment variable has been added with V0.9.3 because with
Warp 4 FP13, unlocking WPS modules hangs the WPS after the next WPS restart. If the
environment variable is not set, modules are <I>not</I> unlocked now. So only set
the variable if you're not running Warp 4 FP13. I guess this behaviour will be the
same with Warp Server for e-business (Aurora).

<P>The exception to this is <CODE>XWPDAEMN.EXE</CODE>, which is not unlocked.
This is intentional.
Unlocking an executable which has registered a system hook
(which becomes part of every PM process on the system)
will _never_ release the DLL containing the hook again, so you'd have to
reboot to use the new DLL.
So if you get an error during the build process which says "XWPDAEMN.EXE is in use",
kill <CODE>XWPDAEMON.EXE</CODE> using some process killer, which will properly
unload the hooks, and try building again.

<P><B>Rebuilding the whole thing.</B> If you want to make sure that all C files
are <I>re</I>compiled, use <CODE>NMAKE -A</CODE> on the main makefile.
Alternatively, you can open and save <CODE>include/setup.h</CODE> to make
it newer than the target files. This is
#include'd in all XWorkplace C files, and the makefiles' inference
rules will then enforce recompilation of <I>all</I> C files.
<BR>
</BODY>
</HTML>
